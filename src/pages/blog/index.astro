---
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";
import GlobalLayout from "../../layouts/GlobalLayout.astro";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const [firstPost, ...otherPosts] = posts;
---

<GlobalLayout title="Articles" description="Articles de blog">
  <section>
    <ul class="flex list-none flex-wrap gap-8 text-center">
      <li class="mb-4 w-full">
        <a href={`/blog/${firstPost.id}/`}>
          <img src={firstPost.data.heroImage} alt="" class="mb-2 rounded-lg" />
          <h4 class="font-slackey text-xl md:text-3xl">
            {firstPost.data.title}
          </h4>
          <p class="text-gray-500">
            <FormattedDate date={firstPost.data.pubDate} />
          </p>
          <p>{firstPost.data.description}</p>
        </a>
      </li>
      {
        otherPosts.map((post) => (
          <li class="mb-4 w-full md:w-[calc(50%_-_1rem)]">
            <a href={`/blog/${post.id}/`}>
              <img src={post.data.heroImage} alt="" class="mb-2 rounded-lg" />
              <h4 class="font-slackey text-xl">{post.data.title}</h4>
              <p class="text-gray-500">
                <FormattedDate date={post.data.pubDate} />
              </p>
            </a>
          </li>
        ))
      }
    </ul>
  </section>
</GlobalLayout>
